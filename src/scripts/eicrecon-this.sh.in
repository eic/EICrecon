#!/bin/sh
#
# This script was automatically generated from the src/scripts/eicrecon-this.sh.in file in the
# EICrecon source directory when EICrecon was built. It can be sourced to set the environment
# up to use this EICrecon build.
#
# This finds directories relative to this script. This should allow the entire EICrecon directory
# to be moved and this script should still work.
#
# Dependency packages (i.e. JANA2 and ROOT) are setup using absolute paths

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )
export EICrecon_ROOT=$( readlink -f ${SCRIPT_DIR}/.. )

#----------------- JANA2
if [[ -f @JANA_DIR@/../../../bin/jana-this.sh ]] ; then
    unset ROOTSYS  # prevent ROOT from removing /usr/local/bin from PATH
    export JANA_ROOT=$( readlink -f @JANA_DIR@/../../.. )
    source @JANA_DIR@/../../../bin/jana-this.sh
fi

#----------------- EICrecon
# Add bin to PATH if not already there
if [[ ! ":$PATH:" == *":$SCRIPT_DIR:"* ]]; then
    export PATH=${SCRIPT_DIR}:${PATH}
fi

# Add lib to LD_LIBRARY_PATH if not already there
LIB_DIR=$( readlink -f ${EICrecon_ROOT}/lib )
if [[ ! ":$LD_LIBRARY_PATH:" == *":$LIB_DIR:"* ]]; then
    export LD_LIBRARY_PATH="${LIB_DIR}${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}"
fi

# Add plugins to JANA_PLUGIN_PATH if not already there
PLUGINS_DIR=$( readlink -f ${EICrecon_ROOT}/@PLUGIN_OUTPUT_DIRECTORY@ )
if [[ ! ":$JANA_PLUGIN_PATH:" == *":$PLUGINS_DIR:"* ]]; then
    export JANA_PLUGIN_PATH="${PLUGINS_DIR}${JANA_PLUGIN_PATH:+:${JANA_PLUGIN_PATH}}"
fi

# Add plugin headers to ROOT_INCLUDE_PATH if not already there
HEADERS_DIR=$( readlink -f ${EICrecon_ROOT}/include )
if [[ ! ":ROOT_INCLUDE_PATH:" == *":$HEADERS_DIR:"* ]]; then
    export ROOT_INCLUDE_PATH="${HEADERS_DIR}${ROOT_INCLUDE_PATH:+:${ROOT_INCLUDE_PATH}}"
fi
